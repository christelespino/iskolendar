<!--#This is a course requirement for CS 192 Software Engineering II under the supervision of Asst. Prof. Ma. Rowena C. Solamo of the Department of Computer Science, College of Engineering, University of the Philippines, Diliman for the AY 2015-2016-->

<!--
02/08/19
Allure Tanquintic
	added crispy form layout
	added buttons
	added the other details to be displayed
03/20/2019
	Patrick Joseph Sanchez
    	added Join Button
03/21/2019
	Christel Espino
		Fixed join event    	
 -->

{% extends "maincalendar/index.html" %}
{% load crispy_forms_tags %}
{% block content %}

	<h4>
		<p> {{ object.title }}</p>
		<p> posted on {{ object.date_posted }}</p>
		<p> {{ object.description }}</p>
		<p> start: {{ object.date_start }}	time: {{ object.time_start }} </p>
		<p> end: {{ object.date_end}}	time: {{ object.time_end }} </p>
		<p> event type: {{ object.event_type }} </p>
		<p> venue: {{ object.venue }} </p>
		<p> degree program restriction: {{ object.deg_prog }} </p>
		<p> college restriction: {{ object.college }} </p>
		<p> limit: {{ object.limit }} </p>
		<p> participants:<br>
			{% for s in object.participants.all%}
				{% if s.name %}
					Hello
				{% endif %}	
				{{s.username}}<br>
			{%endfor%}
		</p>
	</h4>

    {%if request.user.is_authenticated%}
    	{% if user_joined%}
		    <form class="col-lg-12 mt-4" action="{% url 'removeparticipant' %}" method="GET">
				<input type="hidden" value="{{ object.id }}" name="event" id="event">
				<input type="submit" value="Unjoin">
			</form>
		{% else %}
			<form class="col-lg-12 mt-4" action="{% url 'addparticipant' %}" method="GET">
				<input type="hidden" value="{{ object.id }}" name="event" id="event">
				<input type="submit" value="Join">
			</form>
		{% endif %}

		{% if user_bookmarked%}
		    <form class="col-lg-12 mt-4" action="{% url 'removebookmark' %}" method="GET">
				<input type="hidden" value="{{ object.id }}" name="event" id="event">
				<input type="submit" value="Remove bookmark">
			</form>
		{% else %}
			<form class="col-lg-12 mt-4" action="{% url 'addbookmark' %}" method="GET">
				<input type="hidden" value="{{ object.id }}" name="event" id="event">
				<input type="submit" value="Bookmark">
			</form>
		{% endif %}
    {%endif%}

    <div class="col-lg-12 mt-4">
      <a class="btn btn-success active" href="{% url 'maincalendar' %}">Back</a>
    </div>
{% endblock content %}